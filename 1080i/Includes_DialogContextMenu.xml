<?xml version="1.0" encoding="UTF-8"?>
<includes>

    <variable name="Dialog_ContextMenu_SideButtons_WikiTitle">
        <value condition="!String.IsEmpty(Window(Home).Property(TMDbHelper.ListItem.base_tvshowtitle))">$ESCINFO[Window(Home).Property(TMDbHelper.ListItem.base_tvshowtitle)]</value>
        <value condition="!String.IsEmpty(Window(Home).Property(TMDbHelper.ListItem.base_title))">$ESCINFO[Window(Home).Property(TMDbHelper.ListItem.base_title)]</value>
        <value condition="!String.IsEmpty(Window(Home).Property(TMDbHelper.ListItem.base_label))">$ESCINFO[Window(Home).Property(TMDbHelper.ListItem.base_label)]</value>
    </variable>

    <variable name="Dialog_ContextMenu_SideButtons_WikiType">
        <value condition="String.IsEqual(Window(Home).Property(TMDbHelper.ListItem.base_dbtype),tvshow) | String.IsEqual(Window(Home).Property(TMDbHelper.ListItem.base_dbtype),season) | String.IsEqual(Window(Home).Property(TMDbHelper.ListItem.base_dbtype),episode)"> tv series</value>
        <value condition="String.IsEqual(Window(Home).Property(TMDbHelper.ListItem.base_dbtype),movie)"> film</value>
    </variable>

    <include name="Dialog_ContextMenu_BodyContent_Artwork">
        <control type="group">
            <include>Dimension_Dialog_Body_Group</include>
            <include content="DialogInfo_PlotBox_Artwork">
                <param name="poster_icon">$VAR[Image_ContextPoster]</param>
                <param name="landscape_icon">$VAR[Image_ContextFanart]</param>
                <param name="square_icon">$VAR[Image_ContextIcon]</param>
                <param name="clearlogo_icon">$VAR[Image_ContextClearLogo]</param>
            </include>
        </control>
    </include>

    <include name="Dialog_ContextMenu_BodyContent">
        <param name="include_artwork">true</param>
        <definition>
            <control type="group">
                <include>Dimension_Dialog_Body</include>

                <include condition="$PARAM[include_artwork]">Dialog_ContextMenu_BodyContent_Artwork</include>
                
                <control type="group">
                    <include>Dimension_Dialog_Body_Group</include>
                    <control type="group">
                        <control type="grouplist" id="996">
                            <onleft>6099</onleft>
                            <onright>61</onright>
                            <pagecontrol>61</pagecontrol>
                        </control>

                        <include content="Dialog_Scrollbar">
                            <param name="id">61</param>
                            <onleft>996</onleft>
                        </include>
                    </control>
                    <control type="group">
                        <bottom>60</bottom>
                        <height>40</height>
                        <right>$PARAM[lines_right]</right>
                        <include content="Dialog_ItemPage">
                            <param name="id">996</param>
                        </include>
                    </control>
                </control>
            </control>
        </definition>
    </include>
    
    <include name="Dialog_Dim_Overlay">
        <param name="visible">true</param>
        <definition>
            <control type="image">
                <visible>$PARAM[visible]</visible>
                <include>Animation_FadeIn</include>
                <include>Animation_FadeOut</include>
                <texture colordiffuse="shadow_hard">common/white.png</texture>
            </control>
        </definition>
    </include>

    <include name="Dialog_ContextMenu">
        <param name="include_fullmenu">false</param>
        <param name="dialog_size">Dimension_DialogSideMenu</param>
        <param name="button_width">400</param>
        <param name="lines_right">0</param>
        <param name="lines_left">120</param>
        <param name="header">$LOCALIZE[10106]</param>
        <param name="has_buttons">![Window.IsVisible(1160) | Window.IsVisible(favouritesbrowser) | Window.IsVisible(filemanager) | Window.IsVisible(addonbrowser) | Window.IsVisible(Custom_1132_Window_Addons.xml) | !String.IsEmpty(ListItem.AddonName)]</param>
        <definition>
            <include>Defs_Background_Loader</include>
            <include>Dialog_Dim_Overlay</include>

            <control type="group">
               <include>$PARAM[dialog_size]</include>
                <include>Animation_Right_Delay</include>

                    <!-- Backing Layer -->
                    <include content="Dialog_Foreground_Side" condition="$PARAM[has_buttons]">
                        <param name="dialog_size">$PARAM[dialog_size]</param>
                        <param name="topline">true</param>
                        <param name="subline">false</param>
                        <param name="lines_right">$PARAM[lines_right]</param>
                        <param name="lines_left">$PARAM[lines_left]</param>
                    </include>
                    
                    <include content="Dialog_Foreground_Side" condition="![$PARAM[has_buttons]]">
                        <param name="dialog_size">$PARAM[dialog_size]</param>
                        <param name="topline">true</param>
                        <param name="subline">false</param>
                        <param name="lines_right">$PARAM[lines_right]</param>
                        <param name="lines_left">0</param>
                    </include>
                

                    <!-- Header -->
                    <include content="Dialog_Head" condition="$PARAM[has_buttons]">
                        <param name="label">$PARAM[header]</param>
                        <param name="left">200</param>
                    </include>
                    
                    <include content="Dialog_Head" condition="![$PARAM[has_buttons]]">
                        <param name="label">$PARAM[header]</param>
                    </include>

                    <include>Dialog_Head_CloseButton</include>

                    <!-- Content -->
                    <control type="group">
                        <include content="Object_Left" condition="$PARAM[has_buttons]">
                            <param name="left">120</param>
                        </include>
                        <include content="Dialog_ContextMenu_BodyContent">
                            <param name="include_artwork">$PARAM[include_fullmenu]</param>
                            <param name="lines_right">$PARAM[lines_right]</param>
                        </include>
                    </control>

                
                
                <!-- Side Buttons -->
                <include content="Object_Control" condition="$PARAM[has_buttons]">
                    <param name="control">group</param>
                    <include>Dimension_Dialog_Body</include>
                    <include>Dialog_Side_Panel_Group_Def</include>
                    <control type="group">
                        <include>Dialog_Side_Grouplist_Def</include>
                        <include content="ButtonMenu_SideTray">
                            <param name="include">ButtonMenu_ContextControls</param>
                            <param name="onright">996</param>
                        </include>
                    </control>
                </include>
            </control>

            <include content="Settings_Button">
                <param name="id">1000</param>
                <param name="control">button</param>
                <param name="dialog">true</param>
                <include content="Object_Width" condition="![$PARAM[has_buttons]]">
                    <param name="width">dialog_main_button_w</param>
                </include>
                <width>$PARAM[button_width]</width>
            </include>

        </definition>
    </include>

</includes>
