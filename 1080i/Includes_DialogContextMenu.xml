<?xml version="1.0" encoding="UTF-8"?>
<includes>

    <variable name="Dialog_ContextMenu_SideButtons_WikiTitle">
        <value condition="!String.IsEmpty(Window(Home).Property(TMDbHelper.ListItem.base_tvshowtitle))">$ESCINFO[Window(Home).Property(TMDbHelper.ListItem.base_tvshowtitle)]</value>
        <value condition="!String.IsEmpty(Window(Home).Property(TMDbHelper.ListItem.base_title))">$ESCINFO[Window(Home).Property(TMDbHelper.ListItem.base_title)]</value>
        <value condition="!String.IsEmpty(Window(Home).Property(TMDbHelper.ListItem.base_label))">$ESCINFO[Window(Home).Property(TMDbHelper.ListItem.base_label)]</value>
    </variable>

    <variable name="Dialog_ContextMenu_SideButtons_WikiType">
        <value condition="String.IsEqual(Window(Home).Property(TMDbHelper.ListItem.base_dbtype),tvshow) | String.IsEqual(Window(Home).Property(TMDbHelper.ListItem.base_dbtype),season) | String.IsEqual(Window(Home).Property(TMDbHelper.ListItem.base_dbtype),episode)"> tv series</value>
        <value condition="String.IsEqual(Window(Home).Property(TMDbHelper.ListItem.base_dbtype),movie)"> film</value>
    </variable>

    <include name="Dialog_ContextMenu_BodyContent_Artwork">
        <control type="group">
            <include>Dimension_Dialog_Body_Group</include>
            <include content="DialogInfo_PlotBox_Artwork">
                <param name="poster_visible">[!String.IsEmpty(ListItem.Art(poster)) | !String.IsEmpty(Window(Home).Property(TMDbHelper.ListItem.base_poster))]</param>
                <param name="poster_icon">$VAR[Image_ContextPoster]</param>
                <param name="landscape_icon">$VAR[Image_ContextFanart]</param>
                <param name="square_icon">$VAR[Image_ContextIcon]</param>
                <param name="clearlogo_icon">$VAR[Image_ContextClearLogo]</param>
                <param name="landscape_visible">[!String.IsEmpty(ListItem.Art(fanart)) | !String.IsEmpty(Window(Home).Property(TMDbHelper.ListItem.base_fanart))]</param>
            </include>
        </control>
    </include>

    <include name="Dialog_ContextMenu_BodyContent">
        <param name="include_artwork">true</param>
        <definition>
            <control type="group">
                <include>Dimension_Dialog_Body</include>

                <include condition="$PARAM[include_artwork]">Dialog_ContextMenu_BodyContent_Artwork</include>
                
                <control type="group">
                    <include>Dimension_Dialog_Body_Group</include>
                    <include content="Object_Control" condition="!$PARAM[include_artwork] + !String.IsEmpty(Window(Home).Property(TMDbHelper.ListItem.base_fanart))">
                        <param name="control">group</param>

                        <include content="Dialog_Outline_Box">
                            <height>120</height>
                            <control type="image">
                                <texture diffuse="diffuse/banner_w560_h100.png" colordiffuse="main_logo" background="true">$VAR[Image_ContextFanart]</texture>
                                <aspectratio scalediffuse="false">scale</aspectratio>
                            </control>
                            <control type="group">
                                <include content="Dimension_Padding">
                                    <param name="pad">20</param>
                                </include>
                                <control type="image">
                                    <texture background="true">$VAR[Image_ContextClearlogo]</texture>
                                    <aspectratio>keep</aspectratio>
                                    <left>20</left>
                                    <right>20</right>
                                </control>
                            </control>
                        </include>
                    </include>
                    
                    <!-- Context Buttons -->
                    <control type="group">
                        <include content="Object_Top" condition="!$PARAM[include_artwork]">
                            <param name="top">160</param>
                        </include>
                        <top>20</top>
                        <control type="group">
                            <top>-30</top>
                            <height>80</height>
                            <left>20</left>
                            <visible>$EXP[Exp_Context_Expanded]</visible>
                            <visible>![Window.IsVisible(1160) | Window.IsVisible(favouritesbrowser) | Window.IsVisible(filemanager) | Window.IsVisible(addonbrowser) | Window.IsVisible(Custom_1132_Window_Addons.xml) | !String.IsEmpty(ListItem.AddonName)]</visible>
                            <include content="ButtonMenu_MediaTray" condition="!$PARAM[include_artwork]">
                                <param name="include">ButtonMenu_ContextControls</param>
                                <onup>SetFocus(996)</onup>
                                <onup>PageDown</onup>
                                <onup>PageDown</onup>
                                <onup>PageDown</onup>
                                <onup>PageDown</onup>
                                <onup>PageDown</onup>
                                <ondown>SetFocus(996)</ondown>
                                <ondown>PageUp</ondown>
                                <ondown>PageUp</ondown>
                                <ondown>PageUp</ondown>
                                <ondown>PageUp</ondown>
                                <ondown>PageUp</ondown>
                            </include>
                            <include content="ButtonMenu_MediaTray" condition="$PARAM[include_artwork]">
                                <param name="include">ButtonMenu_ContextControls</param>
                                <param name="width">764</param>
                                <param name="centerleft">32%</param>
                                <onup>SetFocus(996)</onup>
                                <onup>PageDown</onup>
                                <onup>PageDown</onup>
                                <onup>PageDown</onup>
                                <onup>PageDown</onup>
                                <onup>PageDown</onup>
                                <ondown>SetFocus(996)</ondown>
                                <ondown>PageUp</ondown>
                                <ondown>PageUp</ondown>
                                <ondown>PageUp</ondown>
                                <ondown>PageUp</ondown>
                                <ondown>PageUp</ondown>
                            </include>
                        </control>
                    </control>
                    
                    <control type="group">
                        <include content="Object_Top" condition="!$PARAM[include_artwork] + !String.IsEmpty(Window(Home).Property(TMDbHelper.ListItem.base_fanart)) + [![Window.IsVisible(1160) | Window.IsVisible(favouritesbrowser) | Window.IsVisible(filemanager) | Window.IsVisible(addonbrowser) | Window.IsVisible(Custom_1132_Window_Addons.xml) | !String.IsEmpty(ListItem.AddonName)]]">
                            <param name="top">240</param>
                        </include>
                        <include content="Object_Top" condition="!$PARAM[include_artwork] + !String.IsEmpty(Window(Home).Property(TMDbHelper.ListItem.base_fanart)) + [Window.IsVisible(1160) | Window.IsVisible(favouritesbrowser) | Window.IsVisible(filemanager) | Window.IsVisible(addonbrowser) | Window.IsVisible(Custom_1132_Window_Addons.xml) | !String.IsEmpty(ListItem.AddonName)]">
                            <param name="top">160</param>
                        </include>
                        <include content="Object_Top" condition="$PARAM[include_artwork] + $EXP[Exp_Context_Expanded] + [![Window.IsVisible(1160) | Window.IsVisible(favouritesbrowser) | Window.IsVisible(filemanager) | Window.IsVisible(addonbrowser) | Window.IsVisible(Custom_1132_Window_Addons.xml) | !String.IsEmpty(ListItem.AddonName)]]">
                            <param name="top">100</param>
                        </include>
                        <control type="image">
                            <top>-20</top>
                            <left>20</left>
                            <right>20</right>
                            <height>1</height>
                            <texture colordiffuse="$VAR[Color_DialogBorder]">common/white.png</texture>
                            <visible>!$PARAM[include_artwork]</visible>
                        </control>
                        <control type="image">
                            <top>-20</top>
                            <left>20</left>
                            <right>496</right>
                            <height>1</height>
                            <texture colordiffuse="$VAR[Color_DialogBorder]">common/white.png</texture>
                            <visible>$PARAM[include_artwork]</visible>
                        </control>
                        <control type="grouplist" id="996">
                            <onup condition="$EXP[Exp_Context_Expanded]">6099</onup>
                            <ondown condition="$EXP[Exp_Context_Expanded]">6099</ondown>
                            <onleft>Close</onleft>
                            <onright>61</onright>
                            <pagecontrol>61</pagecontrol>
                        </control>

                        <include content="Dialog_Scrollbar">
                            <param name="id">61</param>
                            <onleft>996</onleft>
                        </include>
                    </control>
                </control>
            </control>
        </definition>
    </include>
    
    <include name="Dialog_Dim_Overlay">
        <param name="visible">true</param>
        <definition>
            <control type="image">
                <visible>$PARAM[visible]</visible>
                <include>Animation_FadeIn</include>
                <include>Animation_FadeOut</include>
                <texture colordiffuse="shadow_hard">common/white.png</texture>
            </control>
        </definition>
    </include>

    <include name="Dialog_ContextMenu">
        <param name="include_fullmenu">false</param>
        <param name="dialog_size">Dimension_DialogSideMenu</param>
        <param name="button_width">dialog_main_button_w</param>
        <param name="lines_right">0</param>
        <param name="header">$VAR[Label_ContextMenu_Title]</param>
        <definition>
            <include>Defs_Background_Loader</include>
            <include>Dialog_Dim_Overlay</include>

            <control type="group">
                <include>$PARAM[dialog_size]</include>
                <include>Animation_Right_Delay</include>

                <!-- Foreground Layer -->
                <include content="Dialog_Foreground_Side">
                    <param name="dialog_size">$PARAM[dialog_size]</param>
                    <param name="topline">true</param>
                    <param name="subline">true</param>
                    <param name="lines_right">$PARAM[lines_right]</param>

                    <!-- Header -->
                    <include content="Dialog_Head">
                        <param name="label">$PARAM[header]</param>
                    </include>

                    <include>Dialog_Head_CloseButton</include>

                    <!-- Content -->
                    <include content="Dialog_ContextMenu_BodyContent">
                        <param name="include_artwork">$PARAM[include_fullmenu]</param>
                        <param name="lines_right">$PARAM[lines_right]</param>
                    </include>

                </include>
            </control>

            <include content="Settings_Button">
                <param name="id">1000</param>
                <param name="control">button</param>
                <param name="dialog">true</param>
                <width>$PARAM[button_width]</width>
            </include>

        </definition>
    </include>

</includes>
